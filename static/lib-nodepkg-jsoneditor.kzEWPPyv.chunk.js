import{c as e,I as t,j as a,a as r,b as n,r as i,s as l,d as o,o as s,e as d,t as p,f as c,F as h}from"./lib-nodepkg-vuekit.jC5n3oXv.chunk.js";import{J as u,o as y,S as f,g as m,a as v,b as x,r as b,s as g,E as w}from"./lib-nodepkg-typedef.D_2ZclcF.chunk.js";import{O as N,s as C,m as S,f as E,d as k,t as $,E as O,c as D,B as I,S as A}from"./vendor-rxjs.q06iZ5PN.chunk.js";import{g as T,i as L,a as P,b as J,s as M,l as R,c as _,d as B,e as j,f as W,h as z}from"./vendor-innoai-tech-lodash.A7ntj24T.chunk.js";import{s as H,v as V,a as U,b as F,P as K}from"./lib-nodepkg-vueuikit.BY7f6KjV.chunk.js";import{I as X,a as q}from"./lib-nodepkg-vuematerial.ywZOHy3N.chunk.js";import{m as G,a as Q,b as Y,c as Z,d as ee}from"./webapp-vuekit-layout.Bu3Habmu.chunk.js";import{M as et}from"./lib-nodepkg-vuemarkdown.DcnbYH5N.chunk.js";var ea,er,en,ei,el,eo=((ea=eo||{}).NONE="NONE",ea.ADD="ADD",ea.EDIT="EDIT",ea.DELETE="DELETE",ea);class es extends N{constructor(e,t){super(e=>{let t=this.#e.subscribe(e);return()=>{t.unsubscribe()}}),this.typedef=e,this.initials=t,this.#e.next(t)}static of(e,t){return new es(e,t??("array"==e.type?[]:{}))}#e=new t({});initialsAt(e){return T(this.initials,e)}dirty(e,t){if(!L(e)){let a=T(this.initials,t);if(P(a)&&!P(e))return"ADD";if(!P(a)&&P(e))return"DELETE";if(!P(a)&&!P(e)&&a!==e)return"EDIT"}return"NONE"}update(e,t,a){if(console.log("[json-editor]","update",e),this.#t.next({}),0==e.length)return void this.#e.next(t);J(t)?this.#e.next(r=>{let n=T(r,e,a);t(n),M(r,e,n)}):this.#e.next(a=>{M(a,e,t)})}delete(e){0!=e.length&&(console.log("[json-editor]","delete",e),this.#e.next(t=>{let a=R(e);if(_(a)){let r=e.slice(0,e.length-1),n=r.length>0?T(t,r):t;if(B(n))return void n.splice(a,1)}let r=e.slice(0,e.length-1),n=r.length>0?T(t,r):t;delete n[a]}))}#t=new t({});get error$(){return this.#t}setError(e,t){let a=u.create(e);this.#t.next(e=>{null===t?delete e[a]:e[a]=t})}}let ed=e(()=>new es(y(),{})),ep=e(()=>({})),ec=H("span",{displayName:"ActionToolbar"})({px:2,pos:"relative",display:"flex",alignItems:"center",gap:8,visibility:"hidden"}),eh=H("span",({},{slots:e})=>t=>a(t,{children:a(ec,{"data-visible-on-hover":!0,children:e.default?.()})}),{displayName:"Actions"})({display:"flex"}),eu=H(X,{displayName:"ActionBtn"})({transition:"none",width:24,height:24,rounded:12,[`& ${q}`]:{svg:{width:18,height:18}}}),ey=H("span",{displayName:"Token"})({textStyle:"sys.label-small",fontWeight:"bold",fontFamily:"inherit",fontSize:12,lineHeight:24,wordBreak:"keep-all",whiteSpace:"nowrap",font:"code",opacity:.3}),ef=r((e,{slots:t})=>()=>n(ev,{"data-deprecated":e.deprecated,"data-optional":e.optional,"data-nullable":e.nullable,children:[t.leading&&a(em,{"data-visible-on-hover":!0,children:t.leading()}),t.default?.()]}),{displayName:"PropName",props:["deprecated","optional","nullable"]}),em=H(ec,{displayName:"PropLeading"})({position:"absolute",ml:-28}),ev=H("div",{displayName:"PropNameView"})({position:"relative",display:"flex",alignItems:"center",textStyle:"sys.label-small",fontWeight:"bold",fontFamily:"inherit",wordBreak:"keep-all",whiteSpace:"nowrap",border:"1px solid",borderColor:"rgba(0,0,0,0)",fontSize:12,lineHeight:24,_deprecated:{textDecoration:"line-through"},_optional:{"&:after":{content:'"?"',color:"sys.secondary",opacity:.58}}}),ex=H("div",{displayName:"LineTitle"})({position:"absolute",zIndex:1,left:0,opacity:.58,fontSize:10,lineHeight:10,top:0,"& > *":{display:"flex",alignItems:"center",gap:4,"&::before":{content:'"// "',font:"code"}}}),eb=H("div",{displayName:"LineError"})({display:"block",fontSize:10,lineHeight:14,color:"sys.error"}),eg=H("div",{displayName:"LineRow"})({display:"flex",alignItems:"start",py:4}),ew=H("div",{displayName:"LineContainer"})({position:"relative",_hover:{containerStyle:"sys.surface-container","& [data-visible-on-hover]":{visibility:"visible"}},"&:focus-within":{containerStyle:"sys.surface-container"},[`&[data-dirty=${eo.EDIT}]`]:{bgColor:V("sys.warning-container",U(.38))},[`&[data-dirty=${eo.ADD}]`]:{bgColor:V("sys.success-container",U(.38))},[`&[data-dirty=${eo.DELETE}]`]:{bgColor:V("sys.error-container",U(.38)),textDecoration:"line-through",opacity:.58},_error:{bgColor:"sys.error-container"},[`&:has(${eh})`]:{[`& > ${eb}`]:{display:"none"},_error:{bgColor:"inherit"}}}),eN=H("span",{displayName:"Description"})({display:"block",textStyle:"sys.body-small","& p":{my:1,wordBreak:"keep-all",whiteSpace:"nowrap",opacity:.7},"& code":{wordBreak:"keep-all",whiteSpace:"nowrap"}});class eC extends t{static from(e){let t=new eC(!1);return i(e,C(e=>e?S(i(E(e,"focus"),$(()=>{t.show()})),i(E(e,"blur"),k(200),$(()=>{t.value&&t.hide()}))):O),l()),t}show(){this.next(!0)}hide(){this.next(!1)}}let eS=F({apply({elements:e,rects:t}){Object.assign(e.floating.style,{width:`${t.reference.width}px`})}}),eE=r((e,{emit:t,slots:r,render:n})=>{let l=e.open$??new eC(!1),o=e=>{let a=[e.target,...e.composedPath()].find(e=>e?.hasAttribute?.("data-value"));if(a){let e=a.getAttribute("data-value");P(e)||(t("selected",e),l.hide())}};return i(l,n(e=>a(K,{isOpen:e,onClickOutside:()=>l.hide(),onEscKeydown:()=>l.hide(),placement:"bottom-start",middleware:[eS],$content:a(ek,{onClick:o,children:r.content?.()}),children:r.default?.()?.[0]??null})))},{displayName:"Menu",props:["open$"],emits:["selected"]});r((e,{slots:t,render:r})=>{let n=e.open$??new eC(!1);return i(n,r(e=>a(K,{isOpen:e,onClickOutside:()=>n.hide(),placement:"bottom-start",$content:a(ek,{children:t.content?.()}),children:t.default?.()?.[0]??null})))},{displayName:"Popover",props:["open$"]});let ek=H("div",{displayName:"PopoverContainer"})({textStyle:"sys.body-small",pos:"relative",roundedBottom:"sm",containerStyle:"sys.surface-container-lowest",borderBottom:"1px solid",borderRight:"1px solid",borderLeft:"1px solid",borderColor:V("sys.outline-variant",U(.38))}),e$=H("div",{displayName:"MenuItem"})({px:8,py:2,gap:8,display:"flex",alignItems:"center",justifyContent:"space-between",textAlign:"right",textStyle:"sys.body-small",cursor:"pointer",_hover:{containerStyle:"sys.surface-container"},_focus:{containerStyle:"sys.surface-container",outline:0}}),eO=r((e,{slots:t,render:r})=>{let n=new eC(!1);return i(n,r(r=>{let i=t.default?.()[0];return a(K,{isOpen:r,placement:e.placement??"left",$content:a(eI,{children:a(eD,{children:t.title()})}),children:i?o(i,{onMouseover:()=>{n.show()},onMouseout:()=>{n.hide()}}):null})}))},{displayName:"Tooltip",props:["placement"]}),eD=H("div",{displayName:"TooltipContainer"})({py:4,px:12,rounded:"xs",shadow:"3",textStyle:"sys.body-small",containerStyle:"sys.on-surface",pos:"relative",zIndex:100}),eI=H("div",{displayName:"TooltipWrapper"})({px:8});class eA extends t{static from(e){let t=new eA("");return i(e,C(e=>e?i(E(e,"input"),$(e=>{t.next(e.target.value?.trim())})):O),d()),t}}class eT extends A{static from(e){let t=new eT;return i(e,C(e=>e?S(i(E(e,"keypress"),$(e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),t.next({type:"COMMIT"}))})),i(E(e,"keydown"),$(e=>{switch(e.key){case"Tab":case"ArrowDown":e.target.getAttribute("data-options")&&(e.preventDefault(),t.next({type:"SELECT",direction:1}));break;case"ArrowUp":e.target.getAttribute("data-options")&&(e.preventDefault(),t.next({type:"SELECT",direction:-1}))}})),i(E(e,"keyup"),$(e=>{"Escape"===e.key&&t.next({type:"CANCEL"})}))):O),d()),t}}class eL extends N{static sync(e,t){return i(S(i(e,$(e=>{e&&e==u.create(t.path())&&t.editing$.show()})),i(t.editing$,k(1),$(a=>{a||e.disable(t.path())})),i(D([t.value$,e]),k(1),$(([a,r])=>{P(a)&&!r&&e.enable(t.path())}))),d())}#a=new I(null);constructor(){super(e=>{let t=this.#a.subscribe(e);return()=>t.unsubscribe()})}enable(e){this.#a.value||this.#a.next(u.create(e))}disable(e){this.#a.value===u.create(e)&&this.#a.next(null)}}let eP=e(()=>new eL),eJ=r((e,{render:r})=>{let l,o=s(null),c=s(null),h=s(null),u=eT.from(h),y=eA.from(h),m=eP.use(),v=eC.from(h),x=ed.use();eL.sync(m,{editing$:v,value$:e.value$,path:()=>e.ctx.path});let b=()=>{if("enums"===e.typedef.type){let t=(f.schemaProp(e.typedef,"enum")??[]).indexOf(e.value);if(t>-1)return t}return 0},g=new t({index:b()}),w=()=>{y.next(""),v.hide()},N=t=>{if("enums"===e.typedef.type){let a=f.schemaProp(e.typedef,"enum")??[];t??=a[g.value.index%a.length]}else t??=h.value?.value?h.value?.value:void 0;if(P(t))return void x.delete(e.ctx.path);let[a,r]=e.typedef.validate(t,{coerce:!0});if(a)return void x.setError(e.ctx.path,a.message);x.update(e.ctx.path,r),w()};return(e.allowRawJSON&&i(y,$(t=>{let a=t.trim();if(a.startsWith("{")&&a.endsWith("}")||a.startsWith("[")&&a.endsWith("]"))try{let t=JSON.parse(a);x.update(e.ctx.path,t),w()}catch(t){x.setError(e.ctx.path,"无效的 JSON 字符串")}}),d()),i(u,$(t=>{switch(t.type){case"SELECT":g.next(e=>{e.index+=t.direction});break;case"COMMIT":N();break;case"CANCEL":w(),g.next({index:b()}),P(e.value)&&x.delete(e.ctx.path)}}),d()),i(S(i(c,p(e=>{if(e){let t=new ResizeObserver(e=>{for(let t of e)t.contentBoxSize&&(l=t.contentBoxSize[0]?.blockSize)});return t.observe(e),()=>{t.disconnect()}}return()=>{}})),i(h,k(1),$(e=>{e&&(e?.focus(),e.value&&(e.selectionStart=0,e.selectionEnd=e.value.length))})),i(h,C(e=>{if(e){let t=l?l-2:e.getBoundingClientRect().height,a=e=>{e.style.height=`${t??0}px`,e.style.height=`${e.scrollHeight}px`};return setTimeout(()=>a(e)),S(i(E(e,"blur"),$(t=>{t.relatedTarget&&(c.value?.contains(t.relatedTarget)||o.value?.contains(t.relatedTarget))||(t.preventDefault(),N(e.value))})),i(E(e,"input"),$(e=>{a(e.target),y.next(e.target.value)})))}return O}))),d()),"enums"==e.typedef.type)?i(D([e.value$,v,g]),r(([t,r,{index:n}])=>{let i=f.schemaProp(e.typedef,"enum")??[],l=f.metaProp(e.typedef,"enumLabels")??[];return a(eB,{ref:c,onClick:()=>{v.show()},"data-type":typeof t,tabindex:0,children:r?a(eE,{onSelected:e=>{N(e)},open$:v,$content:a("div",{ref:o,children:i.map((e,t)=>a(eW,{"data-focus":n%i.length===t,value:e,label:l[t]}))}),children:a(eR,{children:a("input",{value:void 0==t?"":`${t}`,ref:h,"data-options":!0})})}):a(e_,{children:JSON.stringify(t)??"undefined"})})})):i(D([e.value$,v]),r(([t,r])=>a(eB,{ref:c,onClick:()=>{e.ctx.readOnly||v.show()},onFocus:()=>{e.ctx.readOnly||v.show()},"data-type":typeof t,tabindex:0,children:r?a(K,{isOpen:!0,placement:"right-start",$content:n(eM,{ref:o,children:[a(eu,{type:"button",onClick:()=>u.next({type:"CANCEL"}),children:a(q,{path:G})}),a(eu,{type:"button",onClick:()=>u.next({type:"COMMIT"}),children:a(q,{path:Q})})]}),children:a(eR,{children:a("textarea",{ref:h,rows:1,value:void 0==t?"":`${t}`})})}):a(e_,{children:JSON.stringify(t)??"undefined"})})))},{displayName:"ValueInput",props:["typedef","ctx","value","allowRawJSON"]}),eM=H("div",{displayName:"ValueInputActions"})({borderRight:"1px solid",borderTop:"1px solid",borderBottom:"1px solid",borderColor:V("sys.outline-variant",U(.38)),containerStyle:"sys.surface-container-lowest",roundedRight:"sm",display:"flex",px:2,py:0,ml:-4}),eR=H("div",{displayName:"InputWrapper"})({width:"100%",maxWidth:"40vw",display:"flex",alignItems:"center",border:"1px solid",overflow:"hidden",borderColor:V("sys.outline-variant",U(.38)),opacity:.38,"&:hover":{opacity:1},"&:focus-within":{opacity:1},"& > textarea,input":{flex:1,rounded:"xs",containerStyle:"sys.surface-container-lowest",width:"100%",outline:"none",border:"none",px:8,py:0,m:0,fontSize:"inherit",color:"inherit",lineHeight:"inherit",overflow:"hidden",resize:"none","&[data-options]:focus":{roundedBottom:0}}}),e_=H("div",{displayName:"Value"})({border:"1px solid",borderColor:"rgba(0,0,0,0)",maxWidth:"40vw",width:"100%",overflow:"hidden",textOverflow:"ellipsis",_hover:{textOverflow:"clip",whiteSpace:"normal",wordBreak:"break-all"}}),eB=H("div",{displayName:"ValueContainer"})({wordBreak:"keep-all",whiteSpace:"nowrap",cursor:"pointer",display:"flex",alignItems:"center",font:"code",width:"100%",textStyle:"sys.label-small",fontSize:12,lineHeight:24,gap:8,_type__string:{color:"sys.primary"},_type__number:{color:"sys.primary"},_type__boolean:{color:"sys.warning"},_type__undefined:{color:"sys.error"}}),ej=H(e$,{displayName:"EnumMenuItemContainer"})({[`& ${ef}`]:{textAlign:"left"}}),eW=c(e=>()=>n(ej,{"data-value":e.value,tabindex:0,children:[a(ef,{children:e.value}),e.label&&a(eN,{children:e.label})]}),{displayName:"EnumMenuItem",props:["value","label"]}),ez=m(function(){if(el)return ei;el=1;var e=en?er:(en=1,er=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,a=[],r=0;r<e.rangeCount;r++)a.push(e.getRangeAt(r));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||a.forEach(function(t){e.addRange(t)}),t&&t.focus()}}),t={"text/plain":"Text","text/html":"Url",default:"Text"};return ei=function(a,r){var n,i,l,o,s,d,p,c,h=!1;r||(r={}),l=r.debug||!1;try{if(s=e(),d=document.createRange(),p=document.getSelection(),(c=document.createElement("span")).textContent=a,c.ariaHidden="true",c.style.all="unset",c.style.position="fixed",c.style.top=0,c.style.clip="rect(0, 0, 0, 0)",c.style.whiteSpace="pre",c.style.webkitUserSelect="text",c.style.MozUserSelect="text",c.style.msUserSelect="text",c.style.userSelect="text",c.addEventListener("copy",function(e){if(e.stopPropagation(),r.format)if(e.preventDefault(),void 0===e.clipboardData){l&&console.warn("unable to use e.clipboardData"),l&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var n=t[r.format]||t.default;window.clipboardData.setData(n,a)}else e.clipboardData.clearData(),e.clipboardData.setData(r.format,a);r.onCopy&&(e.preventDefault(),r.onCopy(e.clipboardData))}),document.body.appendChild(c),d.selectNodeContents(c),p.addRange(d),!document.execCommand("copy"))throw Error("copy command was unsuccessful");h=!0}catch(e){l&&console.error("unable to copy using execCommand: ",e),l&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(r.format||"text",a),r.onCopy&&r.onCopy(window.clipboardData),h=!0}catch(e){l&&console.error("unable to copy using clipboardData: ",e),l&&console.error("falling back to prompt"),n="message"in r?r.message:"Copy to clipboard: #{key}, Enter",i=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C",o=n.replace(/#{\s*key\s*}/g,i),window.prompt(o,a)}}finally{p&&("function"==typeof p.removeRange?p.removeRange(d):p.removeAllRanges()),c&&document.body.removeChild(c),s()}return h}}()),eH=r((e,{})=>()=>a(eO,{$title:"复制当前节点为 JSON 字符串",children:a(eu,{type:"button",onClick:()=>ez(JSON.stringify(e.value,null,2)),children:a(q,{path:Y})})}),{displayName:"CopyAsJSONIconBtn",props:["value"]}),eV=r(({},{emit:e})=>()=>a(eO,{$title:"移除项",children:a(eu,{type:"button",onClick:()=>e("remove"),children:a(q,{path:Z})})}),{displayName:"ItemRemoveIconBtn",emits:["remove"]}),eU=r((e,{emit:t,render:r})=>{let l=s(null),o=eA.from(l),p=eT.from(l),c=eC.from(l),h=ed.use(),u=()=>{l.value&&(l.value.value="",l.value.blur())},y=a=>{if(a??=o.value){let[r,n]=f.schemaProp(e.typedef,"items").validate(a,{coerce:!0});if(r)return void h.setError(e.ctx.path,r);t("add",n)}else t("add",void 0);u()};i(o,$(t=>{let a=t.trim();if(a.startsWith("[")&&a.endsWith("]"))try{let t=JSON.parse(a);h.update(e.ctx.path,t),u()}catch(t){h.setError(e.ctx.path,"无效的 JSON 字符串")}if(a.startsWith("{")&&a.endsWith("}"))try{y(JSON.parse(a))}catch(t){h.setError(e.ctx.path,"无效的 JSON 字符串")}}),d()),i(p,$(e=>{switch(e.type){case"COMMIT":y();break;case"CANCEL":u()}}),d());let m=i(c,r(e=>a(K,{isOpen:e,placement:"right-start",$content:n(eM,{children:[a(eu,{type:"button",onClick:()=>p.next({type:"CANCEL"}),children:a(q,{path:G})}),a(eu,{type:"button",onClick:()=>p.next({type:"COMMIT"}),children:a(q,{path:Q})})]}),children:a(eR,{children:a("input",{ref:l,type:"text",placeholder:"添加数组项 (可粘贴 JSON 字符串)"})})})));return()=>a(ew,{children:a(eB,{sx:{mx:-4},children:m})})},{displayName:"ItemAddIconBtn",props:["ctx","typedef"],emits:["add"]});r(({},{emit:e})=>()=>a(eO,{$title:"删除属性",children:a(eu,{type:"button",onClick:()=>e("remove"),children:a(q,{path:Z})})}),{displayName:"PropRemoveIconBtn",emits:["remove"]});let eF=r((e,{emit:r,render:l})=>{let o=s(null),p=eT.from(o),c=eA.from(o),h=eC.from(o),u=ed.use(),y=t.seed({index:0}),m=()=>{h.hide(),c.next(""),o.value&&(o.value.value="",o.value.blur()),y.next({index:0})};i(c,$(t=>{let a=t.trim();if(a.startsWith("{")&&a.endsWith("}"))try{let t=JSON.parse(a);u.update(e.ctx.path,t),m()}catch(t){u.setError(e.ctx.path,"无效的 JSON 字符串")}}),d());let v=t=>{e.options?t??=e.options[y.value.index%e.options.length]?.propName:t??=c.value,t?(r("add",t),m()):u.setError([...e.ctx.path,f.RecordKey],"无效的属性值")};i(p,$(e=>{switch(e.type){case"SELECT":y.next(t=>{t.index+=e.direction});break;case"COMMIT":v();break;case"CANCEL":m()}}),d());let x=i(h,l(e=>a(eR,{children:a("input",{ref:o,type:"text",placeholder:"添加属性 (可粘贴 JSON 字符串)","data-options":e})})));return i(D([c,h,y,e.options$]),l(([e,t,r,i])=>i?i.length>0?a(eB,{sx:{mx:-4},children:a(eE,{onSelected:e=>{v(e)},open$:h,$content:a("div",{children:i.map((t,n)=>e&&!t.propName.includes(e)?null:a(eK,{propName:t.propName,typedef:t.typedef,"data-focus":n===r.index%i.length}))}),children:x})}):null:a(eB,{sx:{mx:-4},children:a(K,{isOpen:t,placement:"right-start",$content:n(eM,{children:[a(eu,{type:"button",onClick:()=>p.next({type:"CANCEL"}),children:a(q,{path:G})}),a(eu,{type:"button",onClick:()=>p.next({type:"COMMIT"}),children:a(q,{path:Q})})]}),children:a(eR,{children:a("input",{ref:o,type:"text",placeholder:"添加属性 (可粘贴 JSON 字符串)"})})})})))},{displayName:"PropValueAddInput",props:["ctx","options"],emits:["add"]}),eK=c(e=>()=>n(eX,{"data-value":e.propName,tabindex:0,children:[a(ef,{optional:f.schemaProp(e.typedef,f.optional),children:e.propName}),a(eN,{children:f.metaProp(e.typedef,"title")})]}),{displayName:"PropMenuItem",props:["propName","typedef"]}),eX=H(e$,{displayName:"AddPropMenuItemContainer"})({[`& ${ef}`]:{textAlign:"left"}}),eq=r((e,{render:t})=>{let r=ed.use(),l=ep.use();return i(D([e.close$,e.value$,r.error$]),t(([t,i,o])=>{let s=B(i)||"array"==e.typedef.type,d=!s&&W(i);if(t)return n(h,{children:[a(ew,{sx:{paddingLeft:(e.path.length+1)*32},children:s?a(eg,{children:a(eU,{ctx:e.ctx,typedef:e.typedef,onAdd:t=>{r.update(e.ctx.path,e=>{e.push(t)},[])}})}):d?a(eg,{children:a(eF,{ctx:e.ctx,onAdd:t=>{r.update([...e.ctx.path,t],void 0)},options:"record"!=e.typedef.type?[...e.typedef.entries(i,e.ctx)].filter(([e])=>!Object.hasOwn(i,e)).map(([e,t,a])=>({propName:String(e),typedef:a})):void 0})}):null}),a(ew,{sx:{paddingLeft:32*e.path.length},children:s?a(eg,{children:a(ey,{children:"]"})}):d?a(eg,{children:a(ey,{children:"}"})}):null})]});let p=R(e.path),c=u.create(e.path),y=!!o[c],m=f.metaProp(e.typedef,"title"),v=f.metaProp(e.typedef,"description");return n(ew,{"data-dirty":r.dirty(i,e.path),"data-error":y,sx:{paddingLeft:32*e.path.length},children:[(m||v)&&a(ex,{sx:{paddingLeft:32*e.path.length},children:v?a(eO,{$title:a(eN,{children:a(et,{text:v})}),children:n("div",{children:[m," ",a(q,{path:ee})]})}):a("span",{children:m})}),n(eg,{children:[P(p)?null:a(ef,{deprecated:f.schemaProp(e.typedef,"deprecated"),$leading:a(eV,{onRemove:()=>{r.delete(e.path)}}),children:a("span",{style:{opacity:j(p)?1:.3},children:`${p}`})}),j(p)?a(ey,{children:":\xa0"}):e.path.length>0?a(ey,{children:"\xa0\xa0"}):null,s?n(h,{children:[a(ey,{children:"["}),a(eh,{children:a(eH,{value:i})})]}):d?n(h,{children:[a(ey,{children:"{"}),a(eh,{children:a(eH,{value:i})})]}):l.$value?.(e.typedef,i,e.ctx)]}),y&&a(eb,{children:`${o[c]}`})]})}))},{displayName:"Line",props:["path","value","typedef","ctx","close"]}),eG=(e,t,r)=>a(eJ,{typedef:e,value:t,ctx:r}),eQ=r(({},{render:e})=>{let t=ed.use(),r=ep.use();return i(t,e(e=>a(eP,{children:a(ep,{value:{$value:r.$value??eG},children:a(eY,{children:a(eZ,{children:[...function* e(t,a,r){if("object"==t.type||"record"==t.type||"intersection"==t.type||"union"==t.type&&f.schemaProp(t,"discriminator")){let n=a??{};for(let[a,i,l]of(yield{path:r.path,value:n,typedef:t,ctx:r},t.entries(n,r)))Object.hasOwn(n,a)&&(yield*e(l,i,{...r,path:[...r.path,a],branch:[...r.branch,i]}));yield{path:r.path,value:n,typedef:t,ctx:r,close:!0};return}if("union"==t.type&&P(f.schemaProp(t,"discriminator"))){let n=f.schemaProp(t,"oneOf");if(n?.length==2){let i=n.find(e=>"array"==e.type),l=n.find(e=>"array"!=e.type);if(i&&l&&f.schemaProp(i,"items").type==l.type){let n=B(a)?a:P(a)?[]:[a];for(let[a,i,l]of(yield{path:r.path,value:n,typedef:t,ctx:r},t.entries(n,r)))yield*e(l,i,{...r,path:[...r.path,a],branch:[...r.branch,i]});yield{path:r.path,value:n,typedef:t,ctx:r,close:!0};return}}}if("array"==t.type){for(let[n,i,l]of(yield{path:r.path,value:a,typedef:t,ctx:r},t.entries(a,r)))yield*e(l,i,{...r,path:[...r.path,n],branch:[...r.branch,i]});yield{path:r.path,value:a,typedef:t,ctx:r,close:!0};return}if("any"==t.type||"unknown"==t.type){if(B(a))return void(yield*e(v(x()),a,r));if(z(a))return void(yield*e(b(g(),x()),a,r))}yield{path:r.path,value:a,typedef:t,ctx:r}}(t.typedef,e,w)].map(e=>a(eq,{ctx:e.ctx,path:e.path,typedef:e.typedef,value:e.value,close:e.close??!1},`${u.create(e.path)}::${e.close??!1}`))})})})})))},{displayName:"JSONEditorView"}),eY=H("div",{displayName:"JSONEditorContainer"})({width:"100%",height:"100%",overflow:"auto"}),eZ=H("div",({},{slots:e})=>t=>a(t,{children:e.default()}),{displayName:"Lines"})({position:"relative",display:"flex",flexDirection:"column"});export{es as J,ed as a,eQ as b,ez as c};
